FROM debian:stable-slim

RUN apt-get update && apt-get install -y --no-install-recommends \
      bash \
      curl \
      jq \
      ca-certificates \
      coreutils \
      tzdata \
      python3 \
      python3-requests \
    && rm -rf /var/lib/apt/lists/*

# syft as before
RUN curl -sSfL https://raw.githubusercontent.com/anchore/syft/main/install.sh \
      | sh -s -- -b /usr/local/bin

WORKDIR /app

COPY satellite.py /app/satellite.py
RUN chmod +x /app/satellite.py

ENV SCAN_INTERVAL_SECONDS=86400

ENTRYPOINT ["python3", "/app/agent.py"]
